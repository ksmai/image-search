"use strict";!function e(r,t,n){function o(i,c){if(!t[i]){if(!r[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=t[i]={exports:{}};r[i][0].call(u.exports,function(e){var t=r[i][1][e];return o(t?t:e)},u,u.exports,e,r,t,n)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(e,r,t){t.searchBoxCtrl=["$scope","$location",function(e,r){e.inputValue=e.initialValue,e.changeQuery=function(){e.inputValue.match(/^\.{1,2}$/)||r.path("/search/"+encodeURIComponent(e.inputValue))}}],t.searchCtrl=["$scope","$routeParams","$http",function(e,r,t){var n=0;e.pending=!1,e.error=!1,e.query=decodeURIComponent(r.query),e.search=function(r){e.pending||(e.pending=!0,e.error=!1,t({url:"/api/imagesearch/"+encodeURIComponent(r)+"?offset="+n,method:"GET"}).then(function(r){return e.pending=!1,200===r.status&&r.data.length?(Array.isArray(e.images)?e.images=e.images.concat(r.data):e.images=r.data,void(n+=10)):Promise.reject(r)}).catch(function(r){e.pending=!1,e.error=!0}))},e.enter=function(r){13===r.which&&e.search(e.query)},e.view=function(r){e.modal=r},e.close=function(){e.modal=null},e.clearError=function(){e.error=!1}}]},{}],2:[function(e,r,t){t.searchBox=function(){return{templateUrl:"/templates/search-box-template.html",controller:"searchBoxCtrl",restrict:"E",scope:{initialValue:"@initialValue",search:"&search",enter:"&enter"}}},t.autoFocus=["$timeout",function(e){return{restrict:"A",link:function(r,t){e(function(){t[0].focus()},0)}}}],t.modal=function(){return{restrict:"E",scope:{close:"&"},transclude:{title:"modalTitle",body:"modalBody",footer:"modalFooter"},templateUrl:"/templates/modal-template.html"}}},{}],3:[function(e,r,t){!function(){var r=angular.module("imageSearch",["ng","ngRoute"]),t=e("./controllers");for(var n in t)t.hasOwnProperty(n)&&r.controller(n,t[n]);var o=e("./directives");for(var a in o)o.hasOwnProperty(a)&&r.directive(a,o[a]);r.config(["$routeProvider","$locationProvider",function(e,r){e.when("/",{templateUrl:"/templates/main-template.html"}).when("/search/:query",{templateUrl:"/templates/search-template.html",controller:"searchCtrl"}).otherwise({redirectTo:"/"}),r.html5Mode(!0),r.hashPrefix("")}])}()},{"./controllers":1,"./directives":2}]},{},[3]);